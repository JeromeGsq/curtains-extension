(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(e){if(e.ep)return;e.ep=!0;const r=n(e);fetch(e.href,r)}})();const d=document.getElementById("version");if(d){const t="__BUILD_VERSION__";d.textContent=t}const c=document.getElementById("shortcut");c&&chrome.commands.getAll(t=>{const o=t.find(n=>n.name==="toggle-curtain");if(o)if(o.shortcut){const n=o.shortcut.replace(/⌘/g,"+CMD+").replace(/⇧/g,"+SHIFT+").replace(/⌥/g,"+OPTION+").replace(/⌃/g,"+CTRL+").replace(/\+\+/g,"+").replace(/^\+/,"").replace(/\+$/,"");c.textContent=n}else c.textContent="Not configured - click below to set";else c.textContent="Command not found"});const u=document.getElementById("configureShortcut");u&&u.addEventListener("click",()=>{chrome.tabs.create({url:"chrome://extensions/shortcuts"})});const s=document.getElementById("themeSelect");s&&(chrome.storage.local.get(["themePreference"],t=>{const o=t.themePreference||"system";s.value=o}),s.addEventListener("change",()=>{const t=s.value;chrome.storage.local.set({themePreference:t},()=>{chrome.tabs.query({},o=>{o.forEach(n=>{n.id&&chrome.tabs.sendMessage(n.id,{action:"updateTheme",theme:t}).catch(()=>{})})})})}));const a=document.getElementById("toggleBtn");a&&a.addEventListener("click",()=>{chrome.tabs.query({active:!0,currentWindow:!0},t=>{t[0]?.id&&chrome.tabs.sendMessage(t[0].id,{action:"toggleCurtain"},()=>{window.close()})})});
